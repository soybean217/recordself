<!DOCTYPE html>
<html lang="en">
<head>
<script>
	//parameters
	//	var mServerUrl = "http://nowiamdoing.com/for-client/";
	var mServerUrl = "http://192.168.1.108:8080/recordself-server/for-client/";
</script>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="FuMing">

<title>Login</title>
<link rel="stylesheet" media="screen" href="css/bootstrap.min.css">
<link rel="stylesheet" media="screen"
	href="css/bootstrap-datetimepicker.min.css">
<link rel="stylesheet" media="screen"
	href="css/jquery.dataTables-1.10.7.css">
<!-- JQUERY validate CSS -->
<link rel="stylesheet" href="css/screen.css">
<!-- close when release -->
<script src="js/debug.js"></script>

<script src="js/jquery-2.1.3.min.js"></script>
<script src="js/bootstrap-3.3.4.min.js"></script>
<script src="js/jquery.dataTables-1.10.7.min.js"></script>
<script src="js/jquery.validate.min.js"></script>
<script src="js/bootstrap-datetimepicker.min.js"></script>
<script src="js/BigInteger.min.js"></script>
<script src="js/record-inc-functions.js"></script>
<script src="js/record-local-db-parameters.js"></script>
<script src="js/record-index.js"></script>
<script src="js/record-sync-server.js"></script>
<script src="cordova.js"></script>
<script src="SQLitePlugin.js"></script>
<script>
	if (navigator.language.substring(0, 3) == "zh-") {
		document.write("<script src='js/globalization-zh.js'><\/script>");
		document.write("<script src='js/messages_zh.min.js'><\/script>");
	} else {
		document.write("<script src='js/globalization-en.js'><\/script>");
	}
</script>

</head>

<body>
	<div class="container" id="divSignIn">
		<form class="form-signin" id="formSignIn" role="form">
			<h2 class="form-signin-heading">
				<script>
					document.write(globalization_sign_in);
				</script>
			</h2>
			<label for="inputEmail" class="sr-only">Email address</label> <input
				type="text" id="signInUserName" class="form-control"
				name="signInUserName" required autofocus> <label
				for="inputPassword" class="sr-only"><script>
					document.write(globalization_password);
				</script></label> <input name="signInPassword" type="password" id="signInPassword"
				class="form-control" required>
			<button class="btn btn-lg btn-primary btn-block" type="submit">
				<script>
					document.write(globalization_sign_in);
				</script>
			</button>
		</form>
	</div>
	<div class="container" id="divSignUp">
		<form class="form-signin" id="formSignUp" role="form">
			<h2 class="form-signin-heading">
				<script>
					document.write(globalization_sign_up);
				</script>
			</h2>
			<label for="inputEmail" class="sr-only"><script>
				document.write(globalization_username);
			</script> </label> <input type="text" id="signUpUserName" class="form-control"
				name="signUpUserName" placeholder="Username" autofocus> <label
				for="inputPassword" class="sr-only"><script>
					document.write(globalization_password);
				</script></label> <input name="signUpPassword" type="password" id="signUpPassword"
				class="form-control" placeholder="Password" required><input
				name="signUpConfirmPassword" type="password"
				id="signUpConfirmPassword" class="form-control"
				placeholder="Password" required>
			<button class="btn btn-lg btn-primary btn-block" type="submit"
				id="register">
				<script>
					document.write(globalization_sign_up);
				</script>
			</button>
			<button class="btn btn-lg btn-primary btn-block" type="button"
				id="signUpJumpToSignIn">
				<script>
					document.write(globalization_sign_in_exist);
				</script>
			</button>
		</form>
	</div>
	<div class="container" id="divMenu">
		<ul class="nav navbar-nav">
			<li><a href="javascript:queryCatalogAndDisplay()"><script>
				document.write(globalization_catalog);
			</script></a></li>
			<li><a href="javascript:showViewRecord();"><script>
				document.write(globalization_all);
			</script></a></li>
		</ul>
	</div>
	<div class="container" id="divRecord">
		<form class="form-record" id="formRecord" role="form">
			<script>
				document.write(globalization_catalog + ":");
			</script>
			<select id="selectCatalog"></select> <input type="text"
				id="recordEditDetail" class="form-control" name="recordEditDetail"
				autofocus><input type="hidden"
				id="metadataRecordContentClientId" class="form-control"
				name="metadataRecordContentClientId"><input type="hidden"
				class="form-control" name="recordEditId" id="recordEditId">
			<div class="row" id="recordEditBeginTimePicker">
				<label for="dtp_input_begin_time" class="col-md-1 control-label"><script>
					document.write(globalization_begin_time);
				</script></label>
				<input type="hidden" id="dtp_input_begin_time" value="" />
				<div class="input-group date form_datetime col-md-3"
					data-link-field="dtp_input_begin_time">
					<input class="form-control" size="14" type="text" value=""
						id="recordEditBeginTime" name="recordEditBeginTime"> <input
						type="hidden" id="metadataRecordBeginTimeClientId"
						class="form-control" name="metadataRecordBeginTimeClientId">
					<span class="input-group-addon"><span
						class="glyphicon glyphicon-remove"></span></span> <span
						class="input-group-addon"><span
						class="glyphicon glyphicon-th"></span></span>
				</div>
			</div>
			<div class="row" id="recordEditEndTimePicker">
				<label for="dtp_input_end_time" class="col-md-1 control-label"><script>
					document.write(globalization_end_time);
				</script></label>
				<div class="input-group date form_datetime col-md-3"
					data-link-field="dtp_input_end_time">
					<input class="form-control" size="14" type="text" value=""
						id="recordEditEndTime" name="recordEditEndTime"> <input
						type="hidden" id="metadataRecordEndTimeClientId"
						class="form-control" name="metadataRecordEndTimeClientId">
					<span class="input-group-addon"><span
						class="glyphicon glyphicon-remove"></span></span> <span
						class="input-group-addon"><span
						class="glyphicon glyphicon-th"></span></span>
				</div>
				<input type="hidden" id="dtp_input_end_time" value="" />
			</div>
			<div class="row" id="recordEditButtonGroup">
				<div class="btn-group" role="group" aria-label="...">
					<button type="submit" class="btn btn-default">
						<script>
							document.write(globalization_update);
						</script>
					</button>
					<button type="button" class="btn btn-warning" id="recordEditDelete">
						<script>
							document.write(globalization_delete);
						</script>
					</button>
					<button type="button" class="btn btn-default" id="recordEditRepeat">
						<script>
							document.write(globalization_repeat);
						</script>
					</button>
				</div>
			</div>
			<button class="btn btn-lg btn-primary btn-block" type="submit"
				id="recordEditAddNew">
				<script>
					document.write(globalization_begin);
				</script>
			</button>
		</form>
	</div>
	<div class="container" id="divDisplayRecordList">
		<table class="display" id="tableRecord"></table>
	</div>
	<div class="container" id="divCatalogForm">
		<form id="formCatalog" role="form">
			<ul class="list-inline">
				<li><input type="text" id="catalogEditContent"
					name="catalogEditContent"><input type="hidden"
					id="catalogEditId" name="catalogEditId"></li>
				<li>
					<button type="submit" class="btn" id="catalogEditSubmit">
						<script>
							document.write(globalization_add_catalog);
						</script>
					</button>
				</li>
			</ul>
		</form>
	</div>
	<div class="container" id="divCatalogList">
		<table class="display" id="tableCatalog"></table>
	</div>
	<div class="container" id="divMenuAfterSignIn">
		<a href="javascript:clearLocalDataForSignOut();"><script>
			document.write(globalization_sign_out);
		</script></a>
	</div>
	<script>
		var LIMIT_UPDATE_BATCH_SIZE = 100;
		var divArray = new Array();
		var databaseStatus = "empty";
		var mJsonMsg, mLocalDbProcess, mLocalParameters, mCurrentCatalogMap, mNeedServerIdCount, mCurrentRecord;
		var mRecordDataSet, mTitleDataSet;
		var mRecordTable, mTitleTable;
		var mLastSyncTime = (new Date()).valueOf();
		var mSyncStatus = 'stop';
		var mSyncTimeout = 60000;
		var mRecordLimit = 40;
		mLocalParameters = {};
		mCurrentCatalogMap = {};
		divArray.push($("#divSignIn"));
		divArray.push($("#divSignUp"));
		divArray.push($("#divRecord"));
		divArray.push($("#divDisplayRecordList"));
		divArray.push($("#divMenuAfterSignIn"));
		divArray.push($("#divMenu"));
		divArray.push($("#divCatalogForm"));
		divArray.push($("#divCatalogList"));
		//divArray.sort();//if you manual sort it , can close it .
		$("#inputPassword").attr("placeholder", globalization_password);
		var db = openDatabase("my.db", '1.0.0', '', 65536);
		$(document).ready(function() {
			formInitial();
			setupRecordListFromDb();
			setupCatalogListFromDb();
		});

		//test on chrome
		$(document).ready(function() {
			initial();
		});

		document.addEventListener("deviceready", onDeviceReady, false);
		function onDeviceReady() {
			db = window.sqlitePlugin.openDatabase({
				name : "my.db"
			});
			initial();
		}

		function initial() {
			initialDB();
			initialButton();
		}

		initialAttribute()
		function initialAttribute() {
			$("#signInUserName").attr("placeholder", globalization_username);
			$("#signInPassword").attr("placeholder", globalization_password);
			$("#signUpUserName").attr("placeholder", globalization_username);
			$("#signUpPassword").attr("placeholder", globalization_password);
			$("#recordEditDetail").attr("placeholder", globalization_detail);
			$("#signUpConfirmPassword").attr("placeholder",
					globalization_confirm_password);
		}
	</script>
</body>
</html>
